{
  "hash": "35be753f04d3b45abf295d5245c667a8",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Dos chicas, un juego de billar y probabilidad\"\nauthor: \"Mauricio Leon\"\ndate: \"2026-01-20\"\ncategories: [probabilidad, python, simulación]\n\nimage: \"preview.png\" \nexecute:\n  echo: true    \n  warning: false \n---\n\n## El problema de Puzzle del billar\n\nEn muchos juegos por puntos, como el billar o el tenis de mesa, surge de manera natural la pregunta: dado el marcador actual, ¿qué probabilidad tiene cada jugador de ganar el partido? Si conociéramos exactamente la habilidad de cada jugador, el problema sería sencillo de resolver con probabilidad elemental. Sin embargo, en la práctica esa habilidad es desconocida y solo podemos inferirla a partir de los puntos ya jugados.\n\nEste planteamiento da lugar al llamado \n**Bayesian Billiards Problem**, un ejemplo clásico que ilustra la diferencia entre el enfoque frecuentista y el bayesiano en estadística. En el escenario que estudiaremos, dos jugadoras A y B compiten por puntos independientes en una mesa de billar, en donde se lanza una bola de manera aleatoria la cual separa el lado de A (izquierdo) y el lado de la jugadora B (lado derecho), gana quien llega primero a 6, y el marcador actual es 5–3 a favor de A. A partir de este resultado parcial, queremos estimar la probabilidad de que B logre remontar y gane el partido.\n\nDesde el punto de vista frecuentista, se suele estimar la probabilidad de que A gane un punto usando la frecuencia observada (5 de 8), y con ese valor se calcula la probabilidad de que B gane tres puntos consecutivos. En contraste, el enfoque bayesiano modela la habilidad de A como un parámetro desconocido con una distribución previa, que se actualiza con los datos observados para obtener una distribución posterior, y a partir de ella se promedia la probabilidad de que B gane el partido.\n\n### Enfoque frecuentista\n\nPrimero, tenemos el enfoque frecuentista, por lo que, partiendo de la información obtenida, sabemos que A tiene 5 puntos, B tiene 3 puntos y por ende, se han realizado 8 jugadas.\nAquí se asume que la probabilidad de que A gane un punto es un parámetro fijo $p$, y se estima con lo observado:\n$$p = \\dfrac{5}{8} \\rightarrow q = 1-p = \\dfrac{3}{8}$$\n\nComo la unica manera de que B gane es que realice 3 puntos seguidos tenemos que la probabilidad de que ocurra esto es:\n$$P(\\text{B gane}) = \\left(\\dfrac{3}{8} \\right)^3 = \\dfrac{27}{512} \\approx 0.0527$$\n\nes decir, tenemos una probabilidad de $5.27%$ de que la jugadora B gane este juego.\n\n### Enfoque bayesiano\n\nSin embargo, para el enfoque bayesiano, esto no es correcto, pues el valor de $p$ ahora ya no es fijo, sino que se le da el tratamiento de una variable aleatoria en donde tenemos que:\n$$\\bullet p \\sim Beta(1,1) \\text{y uniforme}$$\n$$\\bullet A \\text{ya ganó 5 y }B \\text{ya ganó 3}$$\n\nPor lo que ahora tenemos:\n$$p | datos \\sim Beta(1+5,1+3) = Beta(6,4)$$\n\nDe aqui tenemos que la probabilidad gane este juego es:\n$$P(B \\text{gana} | p) = (1-p)^3$$\n\nLa probabilidad bayesiana es el promedio posterior:\n$$P(B \\text{gana} | datos) = E[(1-p)^3]$$\n\nPero como ya sabemos que $p \\sim Beta(6,4)$, entonces\n$$E[(1-p)^3] = \\dfrac{4\\cdot 5 \\cdot 6}{10\\cdot 11 \\cdot 12}=\\dfrac{1}{11}\\approx 0.0909$$\n\nEs decir, que desde el enfoque bayesiano tenemos una probabilidad de que B gane del $9.09%$, es decir, casi el doble del enfoque frecuentista. Pero ¿Como sabremos quien tiene la razón?\nPara esto, haremós uso de la **Simulación de Montecarlo** y responder esta pregunta.\n\n### Simulación de Montecarlo\n\nLa idea es muy sencilla (al igual que el codigo):\nVamos a tirar la bola de manera al azar en una mesa de billar, que, por comodidad tendrá una longitud de 1 y dependiendo donde caiga, ese será nuestro punto de **separador**, es decir, que una vez tengamos nuestra separación en la mesa, se vuelve a tirar la bola para saber si cae del lado izquierdo (lado de la jugadora A) o el lado derecho (de la jugadora B).\n\nSi durante 8 jugadas llegamos al escenario inicial, es decir, que la jugadora A ha acumulado 5 puntos y B 3 puntos, entonces, podemos continuar con el juego para ver quien es el vencedor, realizando este mismo juego una cantidad n, donde n es un numero considerablemente grande (recordar que entre más grande, mejor)\n\nPor último, contamos cuantas de esas partidas ideales (5-3), B salio victoriosa.\n\nEl codigó de python es el siguiente:\n\n::: {#f65af75c .cell execution_count=1}\n``` {.python .cell-code}\nimport numpy as np\nimport matplotlib.pyplot as plt\n\ncontador = 0\nn = 10_000\ni = 0\n\nwhile i < n:\n\n    separador = np.random.random()\n\n    bolas = np.random.random(8)\n    jugador_A = np.sum(bolas < separador)\n    jugador_B = np.sum(bolas >= separador)\n\n    if jugador_A == 5 and jugador_B == 3:\n        i += 1\n\n        while jugador_A < 6 and jugador_B < 6:\n            bola = np.random.random()\n            if bola < separador:\n                jugador_A += 1\n            else:\n                jugador_B += 1\n\n        if jugador_B == 6:\n            contador += 1\n\nplt.figure(figsize=(8, 4))\nax = plt.gca()\nax.set_facecolor(\"#3a7352\")\ny = np.random.random(8)\nplt.scatter(bolas[bolas < separador], y[:5], color='#2ecc71', s=100, label='Puntos para A')\nplt.scatter(bolas[bolas >= separador], y[5:], color='#e74c3c', s=100, label='Puntos para B')\nplt.axvline(x=separador, color='black', linestyle='--', linewidth=2)\nplt.xlim([0,1])\nplt.ylim([0,1])\nplt.legend()\nplt.title(f\"Partida al inicio del problema (puntos dados al azar)\")\nplt.show()\n\nprint(f\"Numero de partidas: {n}\")\nprint(f\"Numero de veces que gana A: {n-contador}\")\nprint(f\"Numero de veces que gana B: {contador}\")\nprint(f\"Probabilidad de que B gane: {contador/n}\")\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-2-output-1.png){width=655 height=357}\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\nNumero de partidas: 10000\nNumero de veces que gana A: 9098\nNumero de veces que gana B: 902\nProbabilidad de que B gane: 0.0902\n```\n:::\n:::\n\n\n### Conclusión\nComo se puede observar, el resultado es el mismo que lo que plantea la estadistica bayesiana (o al menos se acerca mucho), por lo que, una vez la simulacion de montecarlo nos enseña como muchas veces no necesitamos formulas que pueden resultar complicadas o tediosas de entender, sino entender realmente el problema y con un par de lineas de codigo resolver este tipo de incognitas.\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {}
  }
}